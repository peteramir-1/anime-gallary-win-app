<article class="flex content-stretch items-center" appScrollable>
  <section class="flex-initial">
    <button appButton routerLink="/library/add">
      <ng-icon name="heroPlus"></ng-icon>
    </button>
  </section>
  <div class="flex-auto"></div>
  <section class="min-w-[60%] flex-initial">
    <input
      type="text"
      name="search"
      placeholder="Search Example: Demon Slayer"
      [(ngModel)]="searchResult"
      [ngModelOptions]="{ standalone: true }"
      (ngModelChange)="searchByName($event)"
      appInput />
  </section>
  <div class="flex-auto"></div>
  <section class="flex min-w-[25%] flex-initial justify-between">
    <!-- Filter By Like/Love/Favorite -->
    <section class="flex-initial">
      @if (!likedFilter.getValue()) {
      <ng-icon
        class="cursor-pointer align-text-top"
        size="1.75rem"
        color="#dc2626"
        name="jamHeart"
        matTooltip="All Anime"
        (click)="likedFilter.next(true)"></ng-icon>
      } @else {
      <ng-icon
        class="cursor-pointer align-text-top"
        size="1.75rem"
        color="#dc2626"
        name="jamHeartF"
        matTooltip="Liked Anime"
        (click)="likedFilter.next(false)"></ng-icon>
      }
      <ng-template #jamHeartF>
        <ng-icon
          class="cursor-pointer align-text-top"
          size="1.75rem"
          color="#dc2626"
          name="jamHeartF"
          matTooltip="Liked Anime"
          (click)="likedFilter.next(false)"></ng-icon>
      </ng-template>
    </section>

    <!-- Filter By Status of the anime incomplete/complete/all -->
    <section class="flex-initial">
      @if (statusFilter.getValue() === 'incomplete') {
      <ng-icon
        class="cursor-pointer align-text-top text-teal-600 dark:text-white"
        size="1.75rem"
        name="matIncompleteCircle"
        matTooltip="Incompleted Animes"
        (click)="setStatusFilter('complete')"></ng-icon>
      } @else { @if (statusFilter.getValue() === 'complete') {
      <ng-icon
        class="cursor-pointer align-text-top text-teal-600 dark:text-white"
        size="1.75rem"
        name="matCircle"
        matTooltip="Completed Animes"
        (click)="clearStatusFilter()"></ng-icon>
      } @else {
      <span
        matTooltip="Completed and Incompleted Animes"
        class="cursor-pointer align-text-top font-mono text-base font-bold leading-7 text-teal-600 dark:text-white"
        (click)="setStatusFilter('incomplete')">
        N/A
      </span>
      } }
      <ng-template #matCircle>
        @if (statusFilter.getValue() === 'complete') {
        <ng-icon
          class="cursor-pointer align-text-top text-teal-600 dark:text-white"
          size="1.75rem"
          name="matCircle"
          matTooltip="Completed Animes"
          (click)="clearStatusFilter()"></ng-icon>
        } @else {
        <span
          matTooltip="Completed and Incompleted Animes"
          class="cursor-pointer align-text-top font-mono text-base font-bold leading-7 text-teal-600 dark:text-white"
          (click)="setStatusFilter('incomplete')">
          N/A
        </span>
        }
      </ng-template>
    </section>

    <!-- Filter By Anime Season autumn/summer/winter/spring/all -->
    <section class="flex-initial">
      @if (seasonFilter.getValue() === 'autumn') {
      <ng-icon
        class="cursor-pointer align-text-top text-teal-600 dark:text-white"
        size="1.75rem"
        name="lucideLeaf"
        matTooltip="Autumn"
        (click)="setSeasonFilter('summer')"></ng-icon>
      } @else { @if (seasonFilter.getValue() === 'summer') {
      <ng-icon
        class="cursor-pointer align-text-top text-teal-600 dark:text-white"
        size="1.75rem"
        name="matWbSunny"
        matTooltip="Summer"
        (click)="setSeasonFilter('winter')"></ng-icon>
      } @else { @if (seasonFilter.getValue() === 'winter') {
      <ng-icon
        class="cursor-pointer align-text-top text-teal-600 dark:text-white"
        size="1.75rem"
        name="matThunderstorm"
        matTooltip="Winter"
        (click)="setSeasonFilter('spring')"></ng-icon>
      } @else { @if (seasonFilter.getValue() === 'spring') {
      <ng-icon
        class="cursor-pointer align-text-top text-teal-600 dark:text-white"
        size="1.75rem"
        name="lucideFlower2"
        matTooltip="Spring"
        (click)="clearSeasonFilter()"></ng-icon>
      } @else {
      <span
        matTooltip="All Seasons"
        class="cursor-pointer align-text-top font-mono text-base font-bold leading-7 text-teal-600 dark:text-white"
        (click)="setSeasonFilter('autumn')">
        N/A
      </span>
      } } } }
      <ng-template #summer>
        @if (seasonFilter.getValue() === 'summer') {
        <ng-icon
          class="cursor-pointer align-text-top text-teal-600 dark:text-white"
          size="1.75rem"
          name="matWbSunny"
          matTooltip="Summer"
          (click)="setSeasonFilter('winter')"></ng-icon>
        } @else { @if (seasonFilter.getValue() === 'winter') {
        <ng-icon
          class="cursor-pointer align-text-top text-teal-600 dark:text-white"
          size="1.75rem"
          name="matThunderstorm"
          matTooltip="Winter"
          (click)="setSeasonFilter('spring')"></ng-icon>
        } @else { @if (seasonFilter.getValue() === 'spring') {
        <ng-icon
          class="cursor-pointer align-text-top text-teal-600 dark:text-white"
          size="1.75rem"
          name="lucideFlower2"
          matTooltip="Spring"
          (click)="clearSeasonFilter()"></ng-icon>
        } @else {
        <span
          matTooltip="All Seasons"
          class="cursor-pointer align-text-top font-mono text-base font-bold leading-7 text-teal-600 dark:text-white"
          (click)="setSeasonFilter('autumn')">
          N/A
        </span>
        } } }
      </ng-template>
      <ng-template #winter>
        @if (seasonFilter.getValue() === 'winter') {
        <ng-icon
          class="cursor-pointer align-text-top text-teal-600 dark:text-white"
          size="1.75rem"
          name="matThunderstorm"
          matTooltip="Winter"
          (click)="setSeasonFilter('spring')"></ng-icon>
        } @else { @if (seasonFilter.getValue() === 'spring') {
        <ng-icon
          class="cursor-pointer align-text-top text-teal-600 dark:text-white"
          size="1.75rem"
          name="lucideFlower2"
          matTooltip="Spring"
          (click)="clearSeasonFilter()"></ng-icon>
        } @else {
        <span
          matTooltip="All Seasons"
          class="cursor-pointer align-text-top font-mono text-base font-bold leading-7 text-teal-600 dark:text-white"
          (click)="setSeasonFilter('autumn')">
          N/A
        </span>
        } }
      </ng-template>
      <ng-template #spring>
        @if (seasonFilter.getValue() === 'spring') {
        <ng-icon
          class="cursor-pointer align-text-top text-teal-600 dark:text-white"
          size="1.75rem"
          name="lucideFlower2"
          matTooltip="Spring"
          (click)="clearSeasonFilter()"></ng-icon>
        } @else {
        <span
          matTooltip="All Seasons"
          class="cursor-pointer align-text-top font-mono text-base font-bold leading-7 text-teal-600 dark:text-white"
          (click)="setSeasonFilter('autumn')">
          N/A
        </span>
        }
      </ng-template>
    </section>

    <!-- Filter By Anime Release Date -->
    <section class="flex-initial">
      <span
        matTooltip="Release Date"
        [matMenuTriggerFor]="releaseDateFilterMenu"
        class="cursor-pointer align-text-top font-mono text-base font-bold leading-7 text-teal-600 dark:text-white">
        {{ releaseDateFilter.getValue() ?? 'N/A' | uppercase }}
      </span>
      <mat-menu
        style="height: 15rem"
        xPosition="before"
        yPosition="below"
        #releaseDateFilterMenu>
        <cdk-virtual-scroll-viewport
          appendOnly
          itemSize="48"
          minBufferPx="300"
          maxBufferPx="600"
          style="height: 15rem; margin-left: 8px">
          <button mat-menu-item (click)="clearReleaseDateFilter()">N/A</button>
          <button
            [ngClass]="{
              '!bg-blue-500 !text-white':
                year === (this.releaseDateFilter | async)
            }"
            mat-menu-item
            *cdkVirtualFor="let year of years"
            (click)="setReleaseDateFilter(year)">
            {{ year }}
          </button>
        </cdk-virtual-scroll-viewport>
      </mat-menu>
    </section>
  </section>
</article>
